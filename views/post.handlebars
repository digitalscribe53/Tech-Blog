{{> header}}

<main>
    <article>
        <h2>{{title}}</h2>
        <p>Posted by {{user.username}} on {{createdAt}}</p>
        <p>{{content}}</p>
    </article>

    <section>
        <h3>Comments</h3>
        {{#if logged_in}}
            <!-- Display the comment form if the user is logged in -->
            <form id="comment-form">
                <textarea id="comment-content" name="content" placeholder="Leave a comment..." required></textarea>
                <button type="submit">Submit Comment</button>
            </form>
        {{else}}
            <!-- Display the login prompt if the user is not logged in -->
            <p><a href="/login">Sign in to comment</a></p>
        {{/if}}

        <!-- Display the existing comments -->
        {{#each comments}}
            <div class="comment">
                <p>{{content}}</p>
                <p><strong>By {{user.username}} on {{createdAt}}</strong></p>
            </div>
        {{/each}}
    </section>
</main>

<script src="/js/comment.js"></script>

{{> footer}}
